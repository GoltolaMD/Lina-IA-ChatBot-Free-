# 🤖 Lina IA Bookmarklet

---

O **Lina IA Bookmarklet** é uma ferramenta de IA que permite transformar qualquer página web em uma interface de chatbot poderosa, conectada à API do OpenRouter. Acesse uma vasta gama de modelos de linguagem e visão diretamente do seu navegador, sem precisar sair da página que você está visitando.

## ✨ Recursos

* **Acesso Instantâneo:** Ative o chatbot em qualquer página com um clique.
* **Múltiplos Modelos:** Escolha entre 38 modelos de IA diferentes, incluindo modelos de texto geral, de código e multimodais (texto + imagem) do OpenRouter.
* **Suporte a Imagens (via URL):** Envie URLs de imagens para modelos de visão e faça perguntas sobre o conteúdo visual.
* **Persistência de Dados:** Sua API Key e o modelo selecionado são salvos no navegador para sessões futuras.
* **Interface Simples:** Um chat compacto e redimensionável para interações rápidas.

## 🚀 Como Instalar

Instalar o Lina IA Bookmarklet é rápido e fácil:

1.  **Copie o Código:** Copie o código JavaScript completo abaixo para a área de transferência. Certifique-se de copiar **toda a linha única** do código minificado.

    ```javascript
    javascript:(function(){const o="[https://openrouter.ai/api/v1](https://openrouter.ai/api/v1)";const e=[{id:"qwen/qwen3-235b-a22b-07-25:free",name:"Qwen3 235B A22B 2507 (Free)"},{id:"moonshotai/kimi-k2:free",name:"MoonshotAI: Kimi K2 (Free)"},{id:"cognitivecomputations/dolphin-mistral-24b-venice-edition:free",name:"Venice: Uncensored (Free)"},{id:"google/gemma-3n-e2b-it:free",name:"Google: Gemma 3n 2B (Free)"},{id:"tencent/hunyuan-a13b-instruct:free",name:"Tencent: Hunyuan A13B Instruct (Free)"},{id:"tngtech/deepseek-r1t2-chimera:free",name:"TNG: DeepSeek R1T2 Chimera (Free)"},{id:"mistralai/mistral-small-3.2-24b-instruct:free",name:"Mistral: Mistral Small 3.2 24B (Free)"},{id:"moonshotai/kimi-dev-72b:free",name:"Kimi Dev 72b (Free)"},{id:"deepseek/deepseek-r1-0528-qwen3-8b:free",name:"DeepSeek: Deepseek R1 0528 Qwen3 8B (Free)"},{id:"thudm/glm-z1-32b-0414:free",name:"THUDM: GLM Z1 32B (Free)"},{id:"thudm/glm-4-32b-0414:free",name:"THUDM: GLM 4 32B (Free)"},{id:"shisa-ai/shisa-v2-llama-3.3-70b:free",name:"Shisa AI: Shisa V2 Llama 3.3 70B (Free)"},{id:"arliai/qwq-32b-rpr-v1:free",name:"ArliAI: QwQ 32B RpR v1 (Free)"},{id:"agentica-org/deepcoder-14b-preview:free",name:"Agentica: Deepcoder 14B Preview (Free)"},{id:"moonshotai/kimi-vl-a3b-thinking:free",name:"Moonshot AI: Kimi VL A3B Thinking (Free)"},{id:"nvidia/llama-3.1-nemotron-ultra-253b-v1:free",name:"NVIDIA: Llama 3.1 Nemotron Ultra 253B v1 (Free)"},{id:"reka/flash-3:free",name:"Reka: Flash 3 (Free)"},{id:"nousresearch/deephermes-3-llama-3-8b-preview:free",name:"Nous: DeepHermes 3 Llama 3 8B Preview (Free)"},{id:"qwerky/qwerky-72b:free",name:"Qwerky 72B (Free)"},{id:"cognitivecomputations/dolphin-mistral-7b-v2.1:free",name:"Dolphin3.0 Mistral 24B (Free)"},{id:"deepseek/deepseek-r1-distill-qwen-14b:free",name:"DeepSeek: R1 Distill Qwen 14B (Free)"},{id:"deepseek/deepseek-r1-distill-llama-70b:free",name:"DeepSeek: R1 Distill Llama 70B (Free)"},{id:"meta-llama/llama-3.3-70b-instruct:free",name:"Meta: Llama 3.3 70B Instruct (Free)"},{id:"meta-llama/llama-3.2-3b-instruct:free",name:"Meta: Llama 3.2 3B Instruct (Free)"},{id:"meta-llama/llama-3.1-405b-instruct:free",name:"Meta: Llama 3.1 405B Instruct (Free)"},{id:"google/gemma-2-9b-it:free",name:"Google: Gemma 2 9B (Free)"},{id:"deepseek/deepseek-r1:free",name:"DeepSeek: DeepSeek R1 (Free)"},{id:"mistralai/mistral-nemo:free",name:"MistralAI: Mistral Nemo (Free)"},{id:"mistralai/mistral-7b-instruct:free",name:"MistralAI: Mistral 7B Instruct (Free)"},{id:"google/gemini-2.5-pro-exp-03-25",name:"Google: Gemini 2.5 Pro Exp 03-25"},{id:"mistralai/mistral-small-3.1-24b-instruct:free",name:"MistralAI: Mistral Small 3.1 24B Instruct (Free)"},{id:"deepseek/deepseek-chat-v3-0324:free",name:"DeepSeek: DeepSeek Chat V3 0324 (Free)"},{id:"google/gemma-3-4b-it:free",name:"Google: Gemma 3 4B IT (Free)"},{id:"google/gemma-3-12b-it:free",name:"Google: Gemma 3 12B IT (Free)"},{id:"google/gemma-3-27b-it:free",name:"Google: Gemma 3 27B IT (Free)"},{id:"qwen/qwq-32b:free",name:"Qwen: QwQ 32B (Free)"},{id:"cognitivecomputations/dolphin3.0-r1-mistral-24b:free",name:"Dolphin3.0 R1 Mistral 24B (Free)"},{id:"qwen/qwen-2.5-72b-instruct:free",name:"Qwen: Qwen 2.5 72b Instruct (Free)"},{id:"meta-llama/llama-3.2-11b-vision-instruct:free",name:"Meta: Llama 3.2 11B Vision Instruct (Free)"}];let t=sessionStorage.getItem("openrouterApiKey");let n=sessionStorage.getItem("openrouterSelectedModelId");let i=!1;function s(){const s=document.getElementById("lina-ia-chatbot-container");s&&s.remove();const a=document.createElement("div");a.id="lina-ia-chatbot-container",a.style.cssText="position:fixed;bottom:20px;right:20px;width:300px;height:400px;background-color:#000;border:2px solid #ff00ff;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.5);z-index:99999;font-family:Arial,sans-serif;display:flex;flex-direction:column;overflow:hidden;resize:both;min-width:250px;min-height:200px;color:#fff;";const d=document.createElement("div");d.id="lina-ia-header",d.style.cssText="background-color:#222;padding:10px;border-bottom:1px solid #444;font-weight:bold;display:flex;justify-content:space-between;align-items:center;cursor:grab;user-select:none;color:#fff;";d.innerText=`Lina IA (${n?e.find(f=>f.id===n)?.name.split(":")[0].trim():"Selecione o Módulo"})`;const c=document.createElement("button");c.innerText="X",c.style.cssText="background:none;border:none;font-size:18px;cursor:pointer;color:#fff;padding:0 5px;",c.onclick=()=>a.remove(),d.appendChild(c);const r=document.createElement("div");r.id="lina-ia-message-area",r.style.cssText="flex-grow:1;padding:10px;overflow-y:auto;background-color:#111;font-size:14px;line-height:1.4;color:#fff;";const l=document.createElement("div");l.id="lina-ia-input-area-wrapper",l.style.cssText="padding:10px;border-top:1px solid #444;display:flex;flex-direction:column;background-color:#222;";const p=document.createElement("select");p.id="lina-ia-model-selector",p.style.cssText="width:calc(100% - 16px);margin-bottom:10px;padding:8px;border:1px solid #666;border-radius:4px;background-color:#333;color:#fff;font-size:12px;";const g=document.createElement("option");g.value="",g.innerText="-- Selecione um Módulo --",p.appendChild(g),e.forEach(f=>{const o=document.createElement("option");o.value=f.id,o.innerText=f.name,p.appendChild(o)}),n&&(p.value=n);p.addEventListener("change",function(){n=this.value,sessionStorage.setItem("openrouterSelectedModelId",n),document.getElementById("lina-ia-header").innerText=`Lina IA (${e.find(f=>f.id===n)?.name.split(":")[0].trim()})`});const h=document.createElement("input");h.id="lina-ia-api-key-input",h.type="password",h.placeholder="Insira sua API Key do OpenRouter aqui...",h.style.cssText="width:calc(100% - 16px);margin-bottom:10px;padding:8px;border:1px solid #666;border-radius:4px;background-color:#333;color:#fff;font-size:12px;",h.value=t||"",h.addEventListener("input",()=>{t=h.value.trim(),sessionStorage.setItem("openrouterApiKey",t)});const u=document.createElement("textarea");u.id="lina-ia-chat-input",u.placeholder="Digite sua mensagem e/ou URL da imagem...",u.rows=1,u.style.cssText="flex-grow:1;border:1px solid #666;border-radius:4px;padding:8px;margin-right:0;resize:none;overflow-y:hidden;font-size:14px;background-color:#333;color:#fff;";u.addEventListener("input",function(){this.style.height="auto",this.style.height=this.scrollHeight+"px"}),u.addEventListener("keydown",function(e){"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),v())});const m=document.createElement("button");m.innerText="Enviar",m.style.cssText="background-color:#ff00ff;color:#fff;border:none;border-radius:4px;padding:8px 15px;cursor:pointer;font-size:14px;margin-top:10px;transition:background-color .2s;",m.onmouseover=()=>m.style.backgroundColor="#cc00cc",m.onmouseout=()=>m.style.backgroundColor="#ff00ff",m.onclick=v,l.appendChild(p),l.appendChild(h),l.appendChild(u),l.appendChild(m),a.appendChild(d),a.appendChild(r),a.appendChild(l),document.body.appendChild(a);let f=!1,y,x;return d.addEventListener("mousedown",function(e){f=!0,y=e.clientX-a.getBoundingClientRect().left,x=e.clientY-a.getBoundingClientRect().top,a.style.cursor="grabbing"}),document.addEventListener("mousemove",function(e){f&&(a.style.left=e.clientX-y+"px",a.style.top=e.clientY-x+"px")}),document.addEventListener("mouseup",function(){f=!1,a.style.cursor="grab"}),{chatInput:u,sendButton:m,messageArea:r,apiKeyInput:h,modelSelector:p}}function a(e,t,i=!1){const s=document.getElementById("lina-ia-message-area");if(!s)return;const a=document.createElement("div");a.style.cssText="margin-bottom:10px;padding:8px;border-radius:6px;max-width:80%;word-wrap:break-word;",e==="user"?(a.style.cssText+='background-color:#444;align-self:flex-end;margin-left:auto;color:#fff;',a.innerText="Você: "+t):(a.style.cssText+=`background-color:${i?"#800000":"#333"};color:${i?"#ffaaaa":"#fff"};align-self:flex-start;margin-right:auto;`,a.innerText="IA: "+t),s.appendChild(a),s.scrollTop=s.scrollHeight}function d(){const e=document.getElementById("lina-ia-message-area");if(!e)return;let t=document.getElementById("lina-ia-typing-indicator");t||(t=document.createElement("div"),t.id="lina-ia-typing-indicator",t.style.cssText="font-style:italic;color:#aaa;margin-bottom:10px;padding:8px;border-radius:6px;max-width:80%;background-color:#333;",t.innerText="IA está digitando...",e.appendChild(t),e.scrollTop=e.scrollHeight)}function c(){const e=document.getElementById("lina-ia-typing-indicator");e&&e.remove()}const{chatInput:r,sendButton:l,messageArea:p,apiKeyInput:g,modelSelector:h}=s();if(!n){a("ai","Olá! Por favor, **selecione um módulo** no campo acima e insira sua **API Key do OpenRouter** para começar.");r.focus()}else{a("ai",`Bem-vindo(a) de volta! Usando ${e.find(f=>f.id===n)?.name.split(":")[0].trim()} para esta sessão.`);t||a("ai","Lembre-se de inserir sua **API Key do OpenRouter** no campo acima se ainda não o fez.",!0);r.focus()}async function v(){let s=r.value.trim();const u=window.getSelection().toString().trim();if(!s&&!i&&!u)return;if(!s&&u&&!i&&(s=u),!s)return a("ai","Nenhum texto para enviar. Por favor, digite ou selecione um texto.",!0);if(!n)return a("ai","Erro: Por favor, selecione um módulo antes de enviar uma mensagem.",!0),void h.focus();t=g.value.trim();if(!t)return a("ai","Erro: Por favor, insira sua API Key do OpenRouter no campo dedicado.",!0),void g.focus();sessionStorage.setItem("openrouterApiKey",t),a("user",s),r.value="",r.style.height="auto",l.disabled=!0,r.disabled=!0,d();try{const c=e.find(f=>f.id===n)?.type==="vision";let i=[];if(c){const e=s.match(/(https?:\/\/[^\s]+(?:\.png|\.jpg|\.jpeg|\.gif|\.bmp|\.webp))/i);let t=s;if(e){const n=e[0];i.push({type:"image_url",image_url:{url:n}}),t=s.replace(n,"").trim()}if(t)i.push({type:"text",text:t})}else i.push({type:"text",text:s});const u=await fetch(`${o}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json","Authorization":`Bearer ${t}`,"HTTP-Referer":`${window.location.origin}`,"X-Title":"Lina IA Bookmarklet"},body:JSON.stringify({model:n,messages:[{role:"user",content:i}],max_tokens:8e3})});if(!u.ok){const o=await u.json().catch(()=>({})),s=o.error?.message||JSON.stringify(o)||"Erro desconhecido da API.";throw new Error(`HTTP ${u.status}: ${u.statusText} - ${s}`)}const e=await u.json();e?.choices?.[0]?.message?.content?a("ai",e.choices[0].message.content):(a("ai","Erro: Resposta inesperada da IA.",!0),console.error("Resposta inesperada da IA:",e))}catch(o){a("ai",`Erro na comunicação com a IA: ${o.message}`,!0),console.error("Erro ao chamar a IA:",o),o.message.includes("401")||o.message.includes("Unauthorized")||o.message.includes("invalid_api_key")&&(a("ai","Sua **API Key do OpenRouter pode estar incorreta** ou expirada. Por favor, obtenha uma nova chave na plataforma OpenRouter.",!0),sessionStorage.removeItem("openrouterApiKey"),t=null,g.value="")}finally{c(),l.disabled=r.disabled=!1,r.focus(),i=!0}}const y=window.getSelection().toString().trim();y?(r.value=y,r.style.height="auto",r.style.height=y.scrollHeight+"px",n&&t?v():a("ai","Você selecionou um texto. Por favor, selecione um módulo e insira sua API Key do OpenRouter no campo acima para enviá-lo automaticamente para a IA.")):n||h.focus()})();
    ```

2.  **Crie um Novo Favorito:**
    * No seu navegador (Chrome, Firefox, Edge, etc.), abra o **Gerenciador de Favoritos** (geralmente `Ctrl+Shift+O` ou no menu do navegador).
    * Clique com o botão direito em algum lugar na sua barra de favoritos e selecione **"Adicionar nova página"** (ou "Adicionar favorito...", "Novo favorito...", etc.).
    * No campo **Nome**, digite `Lina IA`.
    * No campo **URL** (ou "Local"), **cole o código JavaScript** que você copiou no passo 1.
    * Clique em **"Salvar"**.

## 💡 Como Usar

1.  **Acesse uma Página Web:** Navegue para qualquer site no seu navegador.
2.  **Clique no Bookmarklet:** Clique no favorito `Lina IA` na sua barra de favoritos. Uma interface de chatbot aparecerá no canto inferior direito da tela.
3.  **Insira sua API Key:** Na primeira vez, ou se sua chave expirar, você precisará inserir sua **API Key do OpenRouter** no campo indicado. Você pode obtê-la em [OpenRouter.ai](https://openrouter.ai/keys).
    * **Segurança:** A API Key é armazenada localmente no seu navegador (`sessionStorage`) para sua conveniência.
4.  **Selecione um Modelo:** Escolha um dos 38 modelos disponíveis no seletor de módulos.
5.  **Comece a Conversar:**
    * Digite sua mensagem no campo de texto e pressione `Enter` (ou clique em "Enviar").
    * **Para Modelos de Visão (Texto + Imagem):** Se você selecionar um modelo multimodal (ex: "Meta: Llama 3.2 11B Vision Instruct"), você pode colar um **URL direto de imagem** (terminando em .jpg, .png, etc.) no campo de texto, seguido de sua pergunta. Exemplo:
        `https://seusite.com/sua_imagem.jpg`
        `Descreva esta imagem.`
    * **Texto Selecionado:** Se você tiver um texto selecionado na página, o bookmarklet tentará usá-lo automaticamente como sua mensagem ao clicar.
6.  **Redimensione e Mova:** O chatbot pode ser redimensionado arrastando seus cantos e movido arrastando a barra de título.
7.  **Fechar:** Clique no "X" no canto superior direito para fechar o chatbot.

## ⚠️ Observações de Segurança

* **API Key no Frontend:** Como este é um bookmarklet (código JavaScript executado no navegador), sua API Key é processada no lado do cliente. Embora seja armazenada localmente para sua conveniência, para aplicações mais sensíveis ou de produção, é **altamente recomendável usar um backend** para intermediar as chamadas à API, mantendo sua chave segura no servidor.

## 🤝 Contribuição

Este projeto é uma ferramenta simples e funcional. Se você tiver sugestões para melhorias ou encontrar bugs, sinta-se à vontade para adaptá-lo às suas necessidades!
